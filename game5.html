<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>èŠ’æœåœ°æ”¿å£«äº‹å‹™æ‰€ï¼šå¯¦åƒ¹ç™»éŒ„å¤§æŒ‘æˆ°</title>
    <style>
        body {
            font-family: 'Microsoft JhengHei', 'Heiti TC', sans-serif;
            background-color: #fcefdc;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
            user-select: none;
        }
        #game-container {
            width: 100%;
            max-width: 500px;
            background: #fff;
            display: flex;
            flex-direction: column;
            box-shadow: 0 0 25px rgba(0,0,0,0.15);
            position: relative;
        }
        /* --- é ­éƒ¨å±¬æ€§æ¬„ --- */
        .header {
            background: #e67e22;
            color: white;
            padding: 15px 10px;
            display: flex;
            justify-content: space-around;
            font-size: 16px;
            border-bottom: 5px solid #d35400;
            z-index: 10;
        }
        .stat-box { text-align: center; width: 33%; }
        .stat-label { font-size: 14px; opacity: 0.9; }
        .stat-value {
            font-size: 22px;
            font-weight: bold;
            color: #fff;
            display: block;
            margin-top: 4px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        /* --- éŠæˆ²ä¸»ç•«é¢ --- */
        .screen {
            flex: 1;
            padding: 25px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            text-align: center;
            display: none;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        .active { display: flex; animation: fadeIn 0.4s; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- å…§å®¹æ–‡å­—æ¨£å¼ --- */
        h2 { margin: 10px 0 20px 0; color: #d35400; font-size: 28px; line-height: 1.3; }
        h3 { margin: 5px 0 15px 0; color: #2c3e50; font-size: 22px; font-weight: bold; }
        
        .desc { 
            margin-bottom: 25px; 
            font-size: 19px;
            line-height: 1.6; 
            color: #444; 
            background: #fff8e1;
            padding: 15px; 
            border-radius: 12px; 
            width: 95%; 
            border: 2px solid #ffe0b2;
            box-sizing: border-box;
        }
        
        .npc-img { 
            width: 90px; height: 90px;
            background: #ffeaa7; 
            border-radius: 50%; 
            margin: 10px 0 15px 0; 
            line-height: 90px; 
            font-size: 50px; 
            border: 4px solid #f39c12; 
        }
        
        /* --- æŒ‰éˆ•å€ --- */
        #choices-container { width: 100%; margin-bottom: 10px; }
        
        .btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 20px 20px; 
            /* å³é‚Šç•™å¤šä¸€é»ç©ºé–“çµ¦å°ç« ï¼Œé¿å…æ–‡å­—è¢«å°ç« è“‹ä½ */
            padding-right: 70px; 
            margin: 12px 0;
            width: 100%;
            border-radius: 12px;
            font-size: 19px; 
            line-height: 1.4;
            cursor: pointer;
            transition: all 0.1s;
            box-shadow: 0 5px #2980b9;
            position: relative; /* ç‚ºäº†è®“å°ç« çµ•å°å®šä½ */
            text-align: left;
            font-weight: bold;
            overflow: hidden; /* é˜²æ­¢å°ç« è¶…å‡º */
        }
        .btn:active {
            transform: translateY(4px);
            box-shadow: 0 0 #2980b9;
        }
        
        .btn-correct { background: #27ae60 !important; box-shadow: 0 5px #219150 !important; }
        .btn-wrong { background: #c0392b !important; box-shadow: 0 5px #a93226 !important; opacity: 0.6; }
        .btn-disabled { pointer-events: none; }

        .btn-start, .btn-restart {
            text-align: center;
            font-size: 24px;
            background: #e67e22;
            box-shadow: 0 6px #d35400;
            padding: 20px;
            margin-top: 20px;
            padding-right: 20px; /* é‚„åŸ padding */
        }

        /* --- è“‹ç« ç‰¹æ•ˆ (ä½ç½®ä¿®æ­£) --- */
        .stamp-seal {
            position: absolute;
            /* ç§»åˆ°å³å´ï¼Œå‚ç›´ç½®ä¸­ */
            right: 15px;
            top: 50%;
            width: 80px;
            height: 45px;
            margin-top: -22.5px; /* é«˜åº¦çš„ä¸€åŠï¼Œç¢ºä¿å®Œå…¨å‚ç›´ç½®ä¸­ */
            
            border: 4px solid #c0392b; /* å°æ³¥ç´… */
            color: #c0392b;
            font-size: 24px;
            font-weight: 900;
            line-height: 40px;
            text-align: center;
            border-radius: 8px;
            
            /* ç§»é™¤ç™½è‰²èƒŒæ™¯ï¼Œæ”¹ç‚ºé€æ˜ï¼Œé¿å…é®æ“‹åˆ°åº•ä¸‹é¡è‰² */
            background: transparent;
            
            transform: rotate(-20deg) scale(2); /* åˆå§‹æ”¾å¤§ */
            opacity: 0;
            z-index: 100;
            font-family: "KaiTi", "BiauKai", serif; 
            pointer-events: none;
            
            /* è“‹ç« å‹•ç•« */
            animation: stampIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        @keyframes stampIn {
            to { opacity: 1; transform: rotate(-20deg) scale(1); }
        }
        
        /* --- éŒ¯èª¤å›é¥‹å€ --- */
        #feedback-box {
            width: 100%;
            min-height: 60px;
            margin-top: 10px;
            padding: 15px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            display: none;
            box-sizing: border-box;
            animation: popIn 0.3s;
        }
        .feedback-error {
            background-color: #fadbd8;
            color: #c0392b;
            border: 2px solid #c0392b;
        }
        .feedback-success {
            background-color: #d5f5e3;
            color: #27ae60;
            border: 2px solid #27ae60;
        }
        
        @keyframes popIn {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* --- æµ®å‹•æ–‡å­—ç‰¹æ•ˆ --- */
        .floating-text {
            position: absolute;
            font-weight: bold;
            font-size: 32px;
            text-shadow: 2px 2px 0 #fff, -1px -1px 0 #fff;
            animation: floatUp 1.5s ease-out forwards;
            pointer-events: none;
            z-index: 100;
            width: 100%;
            text-align: center;
            left: 0;
        }
        @keyframes floatUp {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-100px) scale(1.2); opacity: 0; }
        }

        /* --- é€²åº¦æ¢ --- */
        .progress-bar {
            width: 100%;
            height: 10px;
            background: #eee;
            margin-top: 20px;
            border-radius: 5px;
        }
        .progress-fill {
            height: 100%;
            background: #e67e22;
            width: 0%;
            border-radius: 5px;
            transition: width 0.3s;
        }
    </style>
</head>
<body>

<div id="game-container">
    <!-- å±¬æ€§é¡¯ç¤º -->
    <div class="header">
        <div class="stat-box"><div class="stat-label">å°ˆæ¥­åº¦</div><span id="stat-pro" class="stat-value">10</span></div>
        <div class="stat-box"><div class="stat-label">å£“åŠ›å€¼</div><span id="stat-stress" class="stat-value">0</span></div>
        <div class="stat-box"><div class="stat-label">é€²åº¦</div><span id="stat-round" class="stat-value">1/10</span></div>
    </div>

    <!-- é–‹å§‹ç•«é¢ -->
    <div id="screen-start" class="screen active">
        <div class="npc-img">ğŸ¥­</div>
        <h2>èŠ’æœåœ°æ”¿å£«äº‹å‹™æ‰€</h2>
        <p style="color:#e67e22; font-weight:bold; font-size:18px;">â˜… å¯¦åƒ¹ç™»éŒ„æ–°åˆ¶ç‰¹è¨“ç­ â˜…</p>
        <p class="desc">
            æ­¡è¿ä¾†åˆ°ã€ŒèŠ’æœåœ°æ”¿å£«äº‹å‹™æ‰€ã€ï¼<br><br>
            è€é—†å»ç‰äº•è²·èŠ’æœäº†ï¼Œç•™ä¸‹ä¸€å †æ¡ˆä»¶çµ¦ä½ è™•ç†ã€‚<br><br>
            è«‹ä¾ç…§<b>å¯¦åƒ¹ç™»éŒ„ QA æ–°åˆ¶</b>ï¼Œè§£æ±ºå®¢æˆ¶çš„ç–‘é›£é›œç—‡ã€‚å°å¿ƒä½œç­”ï¼Œ<b>ç³»çµ±æœƒçµ¦ä½ æ™‚é–“é–±è®€æ­£ç¢ºè§£ç­”</b>ï¼Œä¸è¦æ€¥è‘—æŒ‰æ‰å–”ï¼
        </p>
        <button class="btn btn-start" onclick="startGame()">é–‹å§‹ä¸Šç­</button>
    </div>

    <!-- éŠæˆ²é€²è¡Œç•«é¢ -->
    <div id="screen-game" class="screen">
        <div class="npc-img" id="npc-avatar">ğŸ‘¤</div>
        <h3 id="q-title">äº‹ä»¶æ¨™é¡Œ</h3>
        <p class="desc" id="q-desc">äº‹ä»¶æè¿°...</p>
        
        <div id="choices-container">
            <!-- æŒ‰éˆ•ç”± JS ç”Ÿæˆ -->
        </div>

        <!-- æ­£ç¢ºç­”æ¡ˆé¡¯ç¤ºå€ -->
        <div id="feedback-box"></div>

        <div class="progress-bar"><div id="progress-fill" class="progress-fill"></div></div>
    </div>

    <!-- çµç®—ç•«é¢ -->
    <div id="screen-result" class="screen">
        <div class="npc-img" id="result-avatar">ğŸ†</div>
        <h2 id="result-title">çµå±€æ¨™é¡Œ</h2>
        <p class="desc" id="result-desc">çµå±€æè¿°</p>
        <p style="font-size:20px; color:#d35400; font-weight:bold; margin-top:0;" id="result-score">æœ€çµ‚å¾—åˆ†ï¼š0</p>
        <button class="btn btn-restart" onclick="location.reload()">é‡æ–°æŒ‘æˆ°</button>
    </div>
</div>

<script>
    // éŠæˆ²ç‹€æ…‹
    let stats = { pro: 10, stress: 0, round: 1 };
    const maxRounds = 10;
    let currentCorrectChoice = null;

    // --- é¡Œåº«è³‡æ–™ ---
    const questionsPool = [
        {
            title: "Q1. ç”³å ±æ–¹å¼çš„æŠ‰æ“‡",
            desc: "è€æŠ•è³‡å®¢æ‹¿è‘— A3 ç´™å¼µé€²ä¾†ï¼šã€Œå¹´è¼•äººï¼Œæ‰‹å¯«æ¯”è¼ƒå¿«å§ï¼Ÿæˆ‘å€‘ç›´æ¥ç”¨æ‰‹å¯« A3 é€ä»¶å¥½ä¸å¥½ï¼Ÿã€(QA1)",
            avatar: "ğŸ‘´",
            correct: { text: "å»ºè­°ç”¨ A2 (é›»è…¦) ç”³å ±ï¼Œç³»çµ±èƒ½æª¢æ ¸éŒ¯èª¤ï¼", effect: {pro: 10, stress: -5}, msg: "æ²’éŒ¯ï¼A2 ç³»çµ±æœ‰æª¢æ ¸æ©Ÿåˆ¶ï¼Œå°¤å…¶æ˜¯åƒ¹æ ¼å–®ä½é¡¯ç¤ºï¼Œèƒ½æ¸›å°‘éŒ¯èª¤ã€‚" },
            wrongs: [
                { text: "å¥½å–”ï¼Œæ‰‹å¯«çœŸçš„æ¯”è¼ƒå¿«ï¼Œæˆ‘å€‘ç”¨ A3ã€‚", effect: {pro: -10, stress: 10}, msg: "å“å‘€ï¼æ‰‹å¯«å®¹æ˜“æ¼å¡«æˆ–é‚è¼¯ä¸ç¬¦ï¼Œè¢«è€é—†å¿µäº†ä¸€é “ã€‚" },
                { text: "ç¾åœ¨è¦å®šåªèƒ½ç”¨ A4 ç´™æ‰‹å¯«ã€‚", effect: {pro: -5, stress: 5}, msg: "äº‚è¬›ï¼Œæ²’æœ‰é€™ç¨®è¦å®šå•¦ï¼" },
                { text: "æˆ‘å¹«ä½ ç”¨ XML åŸå§‹ç¢¼æ‰‹æ‰“ã€‚", effect: {pro: -20, stress: 20}, msg: "åˆ¥é¬§äº†ï¼Œå®¢æˆ¶çœ‹ä¸æ‡‚ä½ åœ¨å¹¹å˜›ã€‚" }
            ]
        },
        {
            title: "Q2. æœªæˆå¹´çš„ç°½å",
            desc: "åª½åª½å¸¶ 5 æ­²å…’å­ä¾†è³£åœ°ï¼šã€Œé€™æ˜¯æˆ‘å…’å­çš„åœ°ï¼Œè¦æŠ“ä»–çš„æ‰‹ç°½åå—ï¼Ÿã€(QA5)",
            avatar: "ğŸ‘©",
            correct: { text: "æœªæ»¿ 7 æ­²ï¼Œç”±æ‚¨(æ³•å®šä»£ç†äºº)ç°½ç« å³å¯ã€‚", effect: {pro: 10, stress: 0}, msg: "å°ˆæ¥­ï¼æœªæ»¿ 7 æ­²ç”±æ³•å®šä»£ç†äººä»£ç‚ºè™•ç†ã€‚" },
            wrongs: [
                { text: "å°ï¼Œä»–æ˜¯æ‰€æœ‰æ¬Šäººï¼Œä¸€å®šè¦æœ¬äººç°½ã€‚", effect: {pro: -10, stress: 5}, msg: "éŒ¯å›‰ï¼5 æ­²ç°½åä¸å…·æ•ˆåŠ›ï¼Œæœƒè¢«è£œæ­£ã€‚" },
                { text: "ä¸ç”¨ç°½åï¼Œå«ä»–åœ¨ä¸Šé¢ç•«ä¸€éš»çƒé¾œå°±å¥½ã€‚", effect: {pro: -15, stress: 5}, msg: "æ«ƒå°äººå“¡æŠŠä½ è¶•äº†å‡ºå»..." },
                { text: "ç­‰ä»–æ»¿ 18 æ­²å†ä¾†ç”³å ±ã€‚", effect: {pro: -20, stress: 10}, msg: "é‚£æ™‚å€™æ—©å°±é€¾æœŸå—ç½°äº†ï¼" }
            ]
        },
        {
            title: "Q3. æ¶ˆå¤±çš„æ±ºæ¨™æ—¥",
            desc: "æ¨™å”®æ¡ˆçš„ç”¢æ¬Šè­‰æ˜æ›¸ä¸Šã€Œæ²’æœ‰å¯«æ±ºæ¨™æ—¥ã€ï¼Œäº¤æ˜“æ—¥æœŸå¡«å“ªå¤©ï¼Ÿ(QA3)",
            avatar: "ğŸ¢",
            correct: { text: "å¡«ã€Œç”¢æ¬Šç§»è½‰è­‰æ˜æ›¸æ ¸ç™¼æ—¥æœŸã€", effect: {pro: 10, stress: -5}, msg: "æ­£è§£ï¼ç„¡æ±ºæ¨™æ—¥å‰‡ä»¥æ ¸ç™¼æ—¥ç‚ºæº–ã€‚" },
            wrongs: [
                { text: "è‡ªå·±éš¨ä¾¿é¸ä¸€å¤©è‰¯è¾°å‰æ—¥ã€‚", effect: {pro: -20, stress: 15}, msg: "è¢«é€€ä»¶ï¼å…¬å‹™å“¡è¡¨ç¤ºä¸èƒ½äº‚å¡«ã€‚" },
                { text: "å¡«ä»Šå¤©é€ä»¶çš„æ—¥æœŸã€‚", effect: {pro: -10, stress: 10}, msg: "éŒ¯èª¤ï¼Œäº¤æ˜“æ—¥è·Ÿé€ä»¶æ—¥ä¸ä¸€æ¨£å–”ã€‚" },
                { text: "æ‰“é›»è©±å•å¸‚é•·ã€‚", effect: {pro: -5, stress: 5}, msg: "å¸‚é•·æ­£åœ¨åƒèŠ’æœï¼Œæ²’ç©ºç†ä½ ã€‚" }
            ]
        },
        {
            title: "Q4. è»Šä½åƒ¹æ ¼ä¹‹è¬",
            desc: "å¤§æ¨“å«è»Šä½ç¸½åƒ¹ 1000 è¬ï¼Œç„¡æ³•æ‹†åˆ†å€‹åˆ¥è»Šä½åƒ¹æ ¼ï¼Œè»Šä½å–®åƒ¹æ¬„ä½æ€éº¼è¾¦ï¼Ÿ(QA13)",
            avatar: "ğŸš—",
            correct: { text: "ç©ºç™½å…å¡« (è«‹å‹¿å¡« 0)", effect: {pro: 10, stress: -5}, msg: "æ­£ç¢ºï¼ç„¡æ³•æ‹†åˆ†å°±ç•™ç™½ï¼Œå¡« 0 æœƒè¢«æ“‹ã€‚" },
            wrongs: [
                { text: "å¡«ã€Œ0ã€å…ƒã€‚", effect: {pro: -15, stress: 15}, msg: "å¤§éŒ¯ç‰¹éŒ¯ï¼ç³»çµ±é‚è¼¯éŒ¯èª¤ï¼Œè»Šä½ä¸å¯èƒ½ä¸ç”¨éŒ¢ã€‚" },
                { text: "å¤§æ¦‚ä¼°å€‹ 100 è¬å¡«é€²å»ã€‚", effect: {pro: -10, stress: 5}, msg: "å¯¦åƒ¹ç™»éŒ„è¬›æ±‚çœŸå¯¦ï¼Œä¸èƒ½ç”¨çŒœçš„ï¼" },
                { text: "å¯«ã€Œè´ˆé€ã€å…©å€‹å­—ã€‚", effect: {pro: -10, stress: 5}, msg: "æ¬„ä½åªèƒ½å¡«æ•¸å­—å•¦..." }
            ]
        },
        {
            title: "Q5. ç½•è¦‹å­—äº‚ç¢¼",
            desc: "å®¢æˆ¶åå­—æœ‰å†·åƒ»å­—ï¼Œé›»è…¦æ‰“å‡ºä¾†è®Šã€Œ??ã€ï¼Œå°å‡ºä¾†æ€éº¼è¾¦ï¼Ÿ(QA29)",
            avatar: "ğŸ”¡",
            correct: { text: "åŠƒæ‰äº‚ç¢¼ï¼Œæ‰‹å¯«æ­£å­—ä¸¦è“‹ç« ã€‚", effect: {pro: 10, stress: 0}, msg: "å¾ˆå¥½ï¼é€™æ˜¯æ¨™æº–è™•ç†æµç¨‹ã€‚" },
            wrongs: [
                { text: "ç³»çµ±æ‰“ä¸å‡ºä¾†å°±ä¸èƒ½ç”³å ±ï¼Œè«‹ä»–æ”¹åã€‚", effect: {pro: -30, stress: 20}, msg: "å®¢æˆ¶æ°£åˆ°è¦å®¢è¨´ä½ ï¼å¤ªæ²’ç¦®è²Œäº†ã€‚" },
                { text: "ç”¨ç«‹å¯ç™½å¡—æ‰å°±å¥½ï¼Œä¸ç”¨è“‹ç« ã€‚", effect: {pro: -10, stress: 5}, msg: "å¡—æ”¹è™•å¿…é ˆè“‹ç« ç¢ºèªæ‰è¡Œå–”ï¼" },
                { text: "è‡ªå·±é€ å­—ä¸Šå‚³åˆ°å…§æ”¿éƒ¨ç³»çµ±ã€‚", effect: {pro: -5, stress: 20}, msg: "æƒ³å¤ªå¤šï¼Œä½ æ²’é€™å€‹æ¬Šé™ã€‚" }
            ]
        },
        {
            title: "Q6. å§”ä»»é—œä¿‚çš„å¥§ç¾©",
            desc: "ä½ è¦å¹«å®¢æˆ¶å…¨æ¬Šè™•ç†ç”³å ±èˆ‡æ›´æ­£ï¼Œç”³å ±æ›¸çš„ã€Œå§”ä»»é—œä¿‚ã€è¦é¸å“ªå€‹ï¼Ÿ(QA10)",
            avatar: "ğŸ“œ",
            correct: { text: "å‹¾é¸ã€Œå§”ä»»é—œä¿‚ 1ã€(å…¼å…·å§”ä»»ä»£ç†äººåŠŸèƒ½)", effect: {pro: 15, stress: -5}, msg: "æ­£ç¢ºï¼é€™æ¨£ä½ æ‰æœ‰æ¬Šé™å¹«å®¢æˆ¶æ›´æ­£ã€‚" },
            wrongs: [
                { text: "å‹¾é¸ã€Œå§”ä»»é—œä¿‚ 2ã€", effect: {pro: -5, stress: 5}, msg: "éŒ¯äº†ï¼Œé—œä¿‚ 2 æ¬Šé™è¼ƒå°ï¼Œç„¡æ³•æ›´æ­£å–”ã€‚" },
                { text: "å…©å€‹éƒ½å‹¾ï¼Œé›™é‡ä¿éšœã€‚", effect: {pro: -10, stress: 5}, msg: "ç³»çµ±æœƒéŒ¯äº‚ï¼Œåªèƒ½é¸ä¸€å€‹ï¼" },
                { text: "ä¸ç”¨å‹¾ï¼Œæˆ‘æœ‰ä»£æ›¸è­‰ã€‚", effect: {pro: -10, stress: 10}, msg: "è¡¨æ ¼æ²’å¡«å°±æ˜¯é€€ä»¶ï¼ä¸è¦éµé½’ã€‚" }
            ]
        },
        {
            title: "Q7. åƒ…åœŸåœ°äº¤æ˜“",
            desc: "é€™æ¬¡åªè³£åœŸåœ°ï¼Œæ²’æœ‰æˆ¿å­ã€‚ç”³å ±æ›¸ä¸Šçš„ã€Œæœ‰ç„¡é›»æ¢¯ã€ã€ã€Œç®¡ç†çµ„ç¹”ã€è¦å¡«å—ï¼Ÿ(QA12)",
            avatar: "ğŸï¸",
            correct: { text: "ä¸ç”¨å¡«ï¼Œé‚£æ˜¯å»ºç‰©è³‡è¨Šã€‚", effect: {pro: 10, stress: 0}, msg: "è§€å¿µæ­£ç¢ºï¼ç´”åœŸåœ°äº¤æ˜“å…å¡«å»ºç‰©æ¬„ä½ã€‚" },
            wrongs: [
                { text: "è¦å¡«ã€Œç„¡ã€ï¼Œæ¯”è¼ƒä¿éšªã€‚", effect: {pro: -5, stress: 5}, msg: "ä¸ç”¨å¡«å•¦ï¼Œå¤šæ­¤ä¸€èˆ‰ã€‚" },
                { text: "å…¨éƒ¨å‹¾é¸ã€Œæœ‰ã€ï¼Œå¢åŠ åƒ¹å€¼ã€‚", effect: {pro: -20, stress: 10}, msg: "é€™æ˜¯ç”³å ±ä¸å¯¦ï¼æœƒè¢«ç½°éŒ¢çš„ï¼" },
                { text: "æ‰‹ç¹ªä¸€æ£Ÿæˆ¿å­åœ¨æ—é‚Šã€‚", effect: {pro: -5, stress: 5}, msg: "ä¸è¦åœ¨ç”³å ±æ›¸ä¸Šå¡—é´‰ã€‚" }
            ]
        },
        {
            title: "Q8. å…§å«è²»ç”¨çš„é™·é˜±",
            desc: "è²·è³£ç¸½åƒ¹è£¡åŒ…å«äº†ã€Œè£æ½¢è²»ã€å’Œã€Œä»²ä»‹è²»ã€ï¼Œè¦æ€éº¼ç”³å ±ï¼Ÿ(QA14)",
            avatar: "ğŸ’°",
            correct: { text: "å¡«ç¸½åƒ¹ï¼Œä¸¦åœ¨å‚™è¨»æ¬„å‹¾é¸ã€Œå…§å«...è²»ç”¨ã€", effect: {pro: 10, stress: -5}, msg: "æ­£ç¢ºï¼å¿…é ˆå®Œæ•´æ­éœ²å…§å«çš„è²»ç”¨ã€‚" },
            wrongs: [
                { text: "è‡ªå·±æŠŠè²»ç”¨æ‰£æ‰ï¼Œåªå¡«æ·¨åƒ¹ã€‚", effect: {pro: -15, stress: 10}, msg: "éŒ¯ï¼è¦ä¾å¥‘ç´„ç¸½åƒ¹å¡«å¯«ï¼Œå†å‚™è¨»èªªæ˜ã€‚" },
                { text: "æ•…æ„çŒæ°´æŠŠåƒ¹æ ¼å¯«æ›´é«˜ã€‚", effect: {pro: -50, stress: 50}, msg: "é€™æ˜¯é•æ³•çš„ï¼ä½ è¢«åŠéŠ·åŸ·ç…§äº†ã€‚" },
                { text: "ä¸ç”¨å‚™è¨»ï¼Œæ²’äººæœƒç™¼ç¾ã€‚", effect: {pro: -20, stress: 10}, msg: "éš±åŒ¿è³‡è¨Šï¼Œå°å¿ƒè¢«æŸ¥åˆ°å—ç½°ã€‚" }
            ]
        },
        {
            title: "Q9. å…¬å®¶æ©Ÿé—œçš„å°ç« ",
            desc: "å®¢æˆ¶è²·äº†æ”¿åºœæ¨™å”®çš„æˆ¿å­ï¼Œéœ€è¦æ”¿åºœæ©Ÿé—œ(è³£æ–¹)ä¸€èµ·ä¾†è“‹ç« ç”³å ±å—ï¼Ÿ(QA22)",
            avatar: "ğŸ›ï¸",
            correct: { text: "é€šå¸¸ä¸ç”¨ï¼Œæ†‘è­‰æ˜æ–‡ä»¶è²·æ–¹å¯å–®ç¨ç”³å ±ã€‚", effect: {pro: 10, stress: 0}, msg: "æ­£ç¢ºï¼æ”¿åºœæ©Ÿé—œé€šå¸¸å…è“‹ç« ã€‚" },
            wrongs: [
                { text: "ä¸€å®šè¦ï¼Œå«å¸‚é•·å‡ºä¾†è“‹ç« ã€‚", effect: {pro: -10, stress: 10}, msg: "åˆ¥é¬§äº†ï¼Œé€™æ˜¯ä¸å¯èƒ½çš„ã€‚" },
                { text: "æ”¿åºœçš„æ¡ˆä»¶ä¸ç”¨å¯¦åƒ¹ç™»éŒ„ã€‚", effect: {pro: -20, stress: 0}, msg: "éŒ¯ï¼é‚„æ˜¯è¦ç”³å ±ï¼Œä¸èƒ½å·æ‡¶ã€‚" },
                { text: "è¦è«‹ç¸½çµ±è“‹ç« ã€‚", effect: {pro: -10, stress: 10}, msg: "å¤ªèª‡å¼µå›‰ã€‚" }
            ]
        },
        {
            title: "Q10. æˆ¿åœ°åˆ†ä»¶è¾¦ç†",
            desc: "åœŸåœ°å’Œå»ºç‰©åˆ†å…©ä»¶ç™»è¨˜ï¼ŒåœŸåœ°ç”³å ±æ›¸çš„åƒ¹æ ¼è¦å¡«å¤šå°‘ï¼Ÿ(QA18)",
            avatar: "ğŸ“‘",
            correct: { text: "åœŸåœ°åƒ¹æ ¼å¡«ã€Œ0ã€ï¼Œå»ºç‰©å¡«ç¸½åƒ¹ã€‚", effect: {pro: 15, stress: -5}, msg: "é«˜é›£åº¦é¡Œï¼æˆ¿åœ°åˆ†ä»¶æ™‚ï¼ŒåœŸåœ°åƒ¹æ ¼å¡«0ï¼Œå»ºç‰©å¡«ç¸½åƒ¹(å«åœŸåœ°)ã€‚" },
            wrongs: [
                { text: "åœŸåœ°è·Ÿå»ºç‰©å„å¡«ä¸€åŠåƒ¹æ ¼ã€‚", effect: {pro: -10, stress: 10}, msg: "éŒ¯ï¼é€™æ¨£ç¸½åƒ¹æœƒé‡è¤‡è¨ˆç®—ã€‚" },
                { text: "å…©é‚Šéƒ½å¡«ç¸½åƒ¹ã€‚", effect: {pro: -10, stress: 10}, msg: "éŒ¯ï¼é€™æ¨£åƒ¹æ ¼æœƒè®Šå…©å€ã€‚" },
                { text: "çœ‹å¿ƒæƒ…éš¨ä¾¿åˆ†ã€‚", effect: {pro: -15, stress: 15}, msg: "ä¸è¡Œï¼é€™æœ‰æ¨™æº–è¦å®šçš„ã€‚" }
            ]
        }
    ];

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function updateStats() {
        document.getElementById('stat-pro').innerText = stats.pro;
        document.getElementById('stat-stress').innerText = stats.stress;
        document.getElementById('stat-round').innerText = stats.round + "/" + maxRounds;
        let pct = ((stats.round - 1) / maxRounds) * 100;
        document.getElementById('progress-fill').style.width = pct + "%";
    }

    function showFloatingText(text, color) {
        const el = document.createElement('div');
        el.className = 'floating-text';
        el.innerText = text;
        el.style.color = color;
        document.getElementById('game-container').appendChild(el);
        setTimeout(() => el.remove(), 1500);
    }

    function startGame() {
        document.getElementById('screen-start').classList.remove('active');
        document.getElementById('screen-game').classList.add('active');
        stats = { pro: 10, stress: 0, round: 1 };
        updateStats();
        loadQuestion();
    }

    function loadQuestion() {
        if (stats.round > maxRounds) {
            endGame();
            return;
        }

        const feedbackBox = document.getElementById('feedback-box');
        feedbackBox.style.display = 'none';
        feedbackBox.innerHTML = '';
        
        const q = questionsPool[stats.round - 1];
        currentCorrectChoice = q.correct;

        document.getElementById('q-title').innerText = q.title;
        document.getElementById('q-desc').innerText = q.desc;
        document.getElementById('npc-avatar').innerText = q.avatar;
        
        const cContainer = document.getElementById('choices-container');
        cContainer.innerHTML = '';
        
        let currentChoices = [];
        let correctChoice = JSON.parse(JSON.stringify(q.correct));
        correctChoice.isCorrect = true;
        currentChoices.push(correctChoice);
        
        let shuffledWrongs = shuffleArray([...q.wrongs]);
        let selectedWrongs = shuffledWrongs.slice(0, 2);
        selectedWrongs.forEach(w => {
            w.isCorrect = false;
            currentChoices.push(w);
        });
        
        currentChoices = shuffleArray(currentChoices);
        
        currentChoices.forEach(c => {
            const btn = document.createElement('button');
            btn.className = 'btn';
            btn.innerText = c.text;
            btn.dataset.isCorrect = c.isCorrect;
            btn.onclick = (e) => makeChoice(c, e.currentTarget);
            cContainer.appendChild(btn);
        });
    }

    function makeChoice(choice, btnElement) {
        // 1. é–å®šæŒ‰éˆ•
        const allBtns = document.querySelectorAll('.btn');
        let correctBtnElement = null;
        
        allBtns.forEach(btn => {
            btn.classList.add('btn-disabled');
            if(btn.dataset.isCorrect === "true") {
                btn.classList.add('btn-correct');
                correctBtnElement = btn;
            }
        });

        // 2. é¡¯ç¤ºè“‹ç« ç‰¹æ•ˆ (ä½ç½®åœ¨å³å´)
        if(correctBtnElement) {
            const stamp = document.createElement('div');
            stamp.className = 'stamp-seal';
            stamp.innerText = 'æ­£è§£';
            correctBtnElement.appendChild(stamp);
        }

        // 3. è™•ç†ç­”éŒ¯æ¨£å¼
        if (!choice.isCorrect) {
            btnElement.classList.add('btn-wrong');
        }

        // 4. æ›´æ–°æ•¸å€¼
        stats.pro += choice.effect.pro;
        stats.stress += choice.effect.stress;
        if(stats.pro < 0) stats.pro = 0;
        
        const color = choice.effect.pro > 0 ? '#27ae60' : '#e74c3c';
        const sign = choice.effect.pro > 0 ? '+' : '';
        showFloatingText(`å°ˆæ¥­ ${sign}${choice.effect.pro}`, color);
        updateStats();

        // 5. é¡¯ç¤ºåº•éƒ¨è©³ç´°å›é¥‹
        const feedbackBox = document.getElementById('feedback-box');
        feedbackBox.style.display = 'block';
        
        if (choice.isCorrect) {
            feedbackBox.className = 'feedback-success';
            feedbackBox.innerHTML = "âœ… æ­å–œç­”å°ï¼";
        } else {
            feedbackBox.className = 'feedback-error';
            feedbackBox.innerHTML = "âŒ ç­”éŒ¯äº†ï¼<br><span style='font-size:16px; font-weight:normal; display:block; margin-top:5px;'>æ­£ç¢ºç­”æ¡ˆæ˜¯ï¼š<br>" + currentCorrectChoice.text + "</span>";
        }

        // 6. è¨ˆç®—é–±è®€æ™‚é–“
        let totalTextLength = choice.msg.length;
        if(!choice.isCorrect) {
            totalTextLength += currentCorrectChoice.text.length;
        }
        let readingDelay = 2000 + (totalTextLength * 150);
        if(readingDelay > 6000) readingDelay = 6000;
        if(readingDelay < 2500) readingDelay = 2500;

        // 7. å½ˆå‡ºè¶£å‘³è¦–çª—
        setTimeout(() => {
            alert(choice.msg);
            setTimeout(() => {
                stats.round++;
                loadQuestion();
            }, readingDelay);
        }, 300);
    }

    function endGame() {
        document.getElementById('screen-game').classList.remove('active');
        document.getElementById('screen-result').classList.add('active');
        
        const rTitle = document.getElementById('result-title');
        const rDesc = document.getElementById('result-desc');
        const rAvatar = document.getElementById('result-avatar');
        const rScore = document.getElementById('result-score');

        rScore.innerText = `æœ€çµ‚å°ˆæ¥­åº¦ï¼š${stats.pro} | å£“åŠ›å€¼ï¼š${stats.stress}`;

        if (stats.pro >= 120) {
            rTitle.innerText = "çµå±€ï¼šèŠ’æœåœ°æ”¿å¤©ç‹";
            rDesc.innerText = "å¤ªç¥äº†ï¼ä½ å°å¯¦åƒ¹ç™»éŒ„çš„äº†è§£æ¯”ç‰äº•èŠ’æœé‚„ç†Ÿï¼è€é—†æ±ºå®šé€ä½ ä¸€æ•´ç±ƒé ‚ç´šæ„›æ–‡èŠ’æœï¼";
            rAvatar.innerText = "ğŸ¥­";
        } else if (stats.pro >= 80) {
            rTitle.innerText = "çµå±€ï¼šç‹ç‰Œä»£æ›¸";
            rDesc.innerText = "è¡¨ç¾å„ªç•°ï¼é›–ç„¶å¶çˆ¾æœƒè¢«å°å•é¡Œå›°æ“¾ï¼Œä½†ä½ æ˜¯äº‹å‹™æ‰€ä¸å¯æˆ–ç¼ºçš„æˆ°åŠ›ã€‚";
            rAvatar.innerText = "ğŸŒŸ";
        } else if (stats.pro >= 40) {
            rTitle.innerText = "çµå±€ï¼šè¿·ç³Šå°åŠ©ç†";
            // ä¿®æ­£çµå±€æ–‡å­—
            rDesc.innerText = "å‹‰å¼·åŠæ ¼ï¼Œä½†å¸¸è¢«é€€ä»¶ã€‚è€é—†è¦ä½ åŠ å¼·å°ˆæ¥­ï¼Œé¿å…è®“å…¬å¸è³ éŒ¢ã€‚";
            rAvatar.innerText = "ğŸ“–";
        } else {
            rTitle.innerText = "çµå±€ï¼šå›å®¶ç¨®èŠ’æœ";
            rDesc.innerText = "éŒ¯èª¤ç™¾å‡ºï¼Œå®¢æˆ¶éƒ½è·‘å…‰äº†ã€‚è€é—†å˜†æ°£èªªï¼šã€Œä½ é‚„æ˜¯å›é„‰ä¸‹å¹«å¿™æ¡æ”¶èŠ’æœå§...ã€";
            rAvatar.innerText = "ğŸšœ";
        }
    }
</script>

</body>
</html>